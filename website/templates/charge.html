{% extends "base.html" %}

{% block title %}Smart Grid Data - Demo{% endblock %}

{% block content %}
<div class="container-fluid">
  <div class="row justify-content-center">
    <div class="col">
    <h1>Smart Grid Data <span class="badge bg-secondary">DEMO of Charging</span></h1>
      <div class="jumbotron" style="width: 550px;">
        <h1 class="display-4" style="font-size: 40px; padding-top: 0px;">Configure the calculation:</h1>
            <p class="lead">DEMO</p>
            <hr class="my-4">
              <form method="POST">
                <div class="form-group">
                  <div class="row">
                    <div class="col">
                        <label for="chosenDate">Date</label>
                        <input id="chosenDate" name="chosenDate" class="form-control" type="date" min="2018-01-16" max="2023-09-29"/>
                    </div>
                  </div>
                </div>
            
                <button type="submit" class="btn btn-primary">Run Calculation!</button>
              </form>
            </hr>
      </div>
  </div>
  <div class="col">
      <h1>Results:</h1>
      {% for i in range(( yys | length )) %}
      <div style="height: 70vh; width: 80%;">
        <canvas id="myChart{{i}}"></canvas>
      </div>
      {% endfor %}
  </div>
  </div>
</div>

{% for i in range(( yys | length )) %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script defer>
  const labels = {{ xs | tojson}};

  const data = {
      labels: labels,
      {
          label: 'Charge Smart',
          backgroundColor: 'rgb(51, 51, 255)',
          borderColor: 'rgb(51, 51, 255)',
          data: {{ yys[loop.index0] | tojson}},
      }
    ]
  };

  const config = {
      type: 'line',
      data: data,
      options: { maintainAspectRatio: false }
  };

  const myChart = new Chart(
      document.getElementById('myChart{{i}}'),
      config
  );

</script>
{% endfor %}
{% endblock %}